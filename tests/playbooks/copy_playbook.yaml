---
- name: Test Copy Module
  hosts: all
  tasks:
    - name: Copy content to file (test 1)
      copy:
        content: "This is copied content\n"
        dest: /tmp/spage/copied_content.txt
        mode: "0644"

    - name: Copy content to file (test 2)
      copy:
        content: "Another copied content\n"
        dest: /tmp/spage/copied_content2.txt
        mode: "0755"

    - name: Verify copied content file exists
      stat:
        path: /tmp/spage/copied_content.txt
      register: copied_content_stat

    - name: Verify second copied content file exists
      stat:
        path: /tmp/spage/copied_content2.txt
      register: copied_content2_stat

    - name: Assert copied files exist
      assert:
        that:
          - "copied_content_stat.stat.exists"
          - "copied_content2_stat.stat.exists"
